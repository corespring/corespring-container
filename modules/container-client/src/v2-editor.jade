extends layout

block content
  
  include mixins/v2-editor

  .container-fluid(ng-controller="Root")
    .nav-container.row
      nav.navbar-default
        .container-fluid
          .helpWrapper
            a.help(href='#help')
              i.fa.fa-question-circle
          ul.list-unstyled.list-inline
            li
              .title-nav {{data.item.profile.taskInfo.title}} 
            li
              .dropdown
                button.btn.btn-default.dropdown-toggle(
                  type='button', 
                  data-toggle='dropdown')
                  | Actions
                  span.caret
                ul.dropdown-menu(role='menu', aria-labelledby='dropdownMenu1')
                  dd_button New
                  dd_button Open... 
                  dd_button Copy... 
                  li.divider(role='presentation')
                  dd_button Archive... 
                  dd_button Delete 
                  li.divider(role='presentation')
                  dd_button QuestionInfo 
            li
              .saveMessaging

          ul#mainTabNav.nav.nav-tabs(role='tablist')
            +tab('Question', 'question')
            +tab('Profile', 'profile')
            +tab('Supporting Materials', 'supporting-materials')
 
//After the angular module has been created.
block after-main-script

  script.

    function mkEditorState(path, id){
      return {
        url: path,
        views: {
          main: {
            template: $('#' + id).html()
          },
          preview: {
            template: $('#' + id + '-preview').html()
          }
        }
      }
    }

    var appLoadConfig = {
      moduleName: 'corespring-editor',
      defaultPath: '/design/main',
      states: {
        design : mkEditorState('/design/:section', 'designer'),
        'item-profile' : mkEditorState('/item-profile', 'item-profile'),
        'supporting-materials' : mkEditorState('/supporting-materials/:intro', 'supporting-materials'),
        'supporting-material' : mkEditorState('/supporting-material/:index','supporting-material'),
        overview: mkEditorState('/overview', 'overview')
      }
    };

    angular.module('corespring-#{appName}').config(
      function($provide, $stateProvider, $urlRouterProvider) {
        $urlRouterProvider.otherwise(appLoadConfig.defaultPath);
        for( var x in appLoadConfig.states){
          $stateProvider.state(x, appLoadConfig.states[x]);
        }
      });
