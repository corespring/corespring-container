//Add new popup
script( type="text/ng-template", id="/templates/popups/addSupportingMaterial")
  +modal('Add Supporting Material', 'Submit')

    .alert.title
        | When composing an assessment item, it can be useful to include supplemental materials to assist in scoring or classroom discussion.

    .add-supporting-material-popup
      div(supportingmetadata="", ng-model='supportingMaterial')
      dl.dl-horizontal
        dt Source
        dd
          input(id='create', type='radio', value='createHtml', ng-model='supportingMaterial.method')
          label.create-own(for='create') create your own
          input(id='upload', type='radio', value='uploadFile', ng-model='supportingMaterial.method')
          label(for='upload') upload a file
          input(type='file', fileChange="",ng-show="supportingMaterial.method == 'uploadFile'")

// Upload progress popup
script( type="text/ng-template", id="/templates/popups/uploadingSupportingMaterial")
  +modal('Uploading Supporting Material', 'Ok', false)
    div(style="text-align: center") Uploading...
    progressbar(max="100",value="progress")
      span(style="color:black; white-space:nowrap;") {{progress}}%

script(type="text/ng-template", id="/templates/supporting-materials")
  .supporting-materials(ng-controller="SupportingMaterials")
    .col-md-4.row
      .add-new-block
        button.btn.btn-default(ng-click="addNew()")
            i.fa.fa-plus
            | &nbsp;add new supporting material
      ul.supporting-materials-list
        li(ng-repeat="s in supportingMaterials",ng-model="s",ng-class="{divider: s.type == 'divider', data: s.type == 'data', selected: s.index == index}", ui-sref="supporting-materials({index: s.index})")
          h4(ng-if="s.type == 'header'") {{s.label}}
          a(ng-if="s.type == 'data'") {{s.label}}
          i.fa.fa-trash-o.pull-right(ng-if="s.type == 'data'", ng-click="deleteSupportingMaterial(s.index, $event)")
    .col-md-6
      .supporting-material(ng-show='supportingMaterial')
        div(supportingmetadata="", ng-model='supportingMaterial')
        .editor-container(ng-class="editorMode", ng-show="isContentType('text/html')")
          wiggi-wiz(
            formatting-display="dropdown",
            ng-model="supportingMarkup",
            image-service="imageService",
            features="extraFeatures")
            toolbar(basic="bold italic underline", formatting="h1 h2 p")
            edit-pane-toolbar(alignment="bottom")
              .btn-group
                button(ng-click="closePane()", class="btn btn-sm btn-success", style="float:right;") OK

        .file-upload-info(ng-show="!isContentType('text/html')")
          dl.dl-horizontal
            div
              dt File Name
              dd {{supportingMaterial.name}}
            div
              dt Material Type
              dd {{materialType}}
            div
              dt File Size
              dd {{formatKB(supportingMaterialFileSize)}}
            div
              dt(ng-show='hasDate(supportingMaterial)') Date
              dd(ng-show='hasDate(supportingMaterial)') {{formatDate(supportingMaterial.dateModified)}}

            div.preview-file(ng-if="!isContentType('text/html')")
              iframe(ng-src="{{getSupportingUrl()}}", width="100%", height="100%")

