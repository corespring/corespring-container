//Add new popup
script( type="text/ng-template", id="/templates/popups/addSupportingMaterial")
  +modal('Add Supporting Material', 'Submit')
    .alert.title
        | When composing an assessment item, it can be useful to include supplemental materials to assist in scoring or classroom discussion.

    .add-supporting-material-popup
      div(
        supportingmetadata, 
        focus-title="true", 
        ng-model='supportingMaterial',
        existing-names='materialNames')

// Upload progress popup
script( type="text/ng-template", id="/templates/popups/uploadingSupportingMaterial")
  +modal('Uploading Supporting Material', 'Ok', false)
    div(style="text-align: center") Uploading...
    progressbar(max="100",value="progress")
      span(style="color:black; white-space:nowrap;") {{progress}}%

script(type="text/ng-template", id="/templates/supporting-materials")
  .supporting-materials(ng-controller="SupportingMaterials")
    .col-md-4.row
      .add-new-block
        button.btn.btn-default(id="addNewButton",ng-click="addNew()")
            i.fa.fa-plus
            | &nbsp;add new supporting material
      ul.supporting-materials-list
        li(ng-repeat="s in supportingMaterials",
          ng-model="s",
          ng-class="{divider: s.type == 'divider', data: s.type == 'data', selected: s.index == index}", 
          ui-sref="supporting-materials({index: s.index})")
          h4(ng-if="s.type == 'header'") {{s.label}}
          a(ng-if="s.type == 'data'") {{s.label}}
          i.fa.fa-trash-o.pull-right(ng-if="s.type == 'data'", ng-click="deleteSupportingMaterial(s.index, $event)")
    .col-md-6
      .supporting-material(ng-show='supportingMaterial')
        div(supportingmetadata="", ng-model='supportingMaterial')
        .editor-container(ng-class="editorMode", ng-show="isContentType('text/html')")
          wiggi-wiz(
            formatting-display="dropdown",
            ng-model="supportingMarkup",
            image-service="imageService",
            overrideFeatures="overrideFeatures",
            features="extraFeatures",
            dialog-launcher="external")
            toolbar(basic="bold italic underline", media="", formatting="blockquote h1 h2 h3")
            edit-pane-toolbar(alignment="bottom")
              .btn-group
                button(ng-click="closePane()", class="btn btn-sm btn-success", style="float:right;") OK

        .file-upload-info(ng-show="!isContentType('text/html')")
          dl.dl-horizontal
            dt File Size
            dd(id="fileSizeInfo") {{formatKB(supportingMaterialFileSize)}}
            dt(ng-show='hasDate(supportingMaterial)') Date
            dd(ng-show='hasDate(supportingMaterial)') {{formatDate(supportingMaterial.dateModified)}}

            div.preview-file(ng-if="!isContentType('text/html')")
              iframe(frameborder="0", ng-src="{{getSupportingUrl()}}", width="100%", height="100%")
