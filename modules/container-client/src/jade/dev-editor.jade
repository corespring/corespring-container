extends layout

//After the angular module has been created.
block after-main-script

  script.
    angular.module('corespring-#{appName}').constant("STATIC_PATHS", !{staticPaths} );

block content
  style

  .root(ng-controller="DevEditorRoot")
    .top-row
      span Dev Editor
      .pane-buttons.btn-group
        label.btn.btn-default(btn-checkbox="true", ng-model="panes.html") html
        label.btn.btn-default(btn-checkbox="true", ng-model="panes.json") json
        label.btn.btn-default(btn-checkbox="true", ng-model="panes.scoring") scoring
        label.btn.btn-default(btn-checkbox="true", ng-model="panes.player") player
      .pull-right
        button.btn.btn-sm.btn-default(ng-click="save()") Save
    table.panes
      tr
        td(ng-show="panes.html")
          .xhtml-pane(ui-ace,
              ng-model="xhtml",
              ui-ace="{mode: 'html', useWrapMode : true, onLoad: aceLoaded, onChange: aceChanged }")
        td(ng-show="panes.json")
          .json-pane(ui-ace
              ng-model="json",
              ui-ace="{mode: 'json', useWrapMode : true, onLoad: aceLoaded, onChange: aceJsonChanged }")
        td(ng-show="panes.scoring")
          .custom-js-pane(ui-ace,
              ng-model="customScoringJs",
              ui-ace="{mode: 'javascript', useWrapMode : true }")
        td(ng-show="panes.player")
          .preview(ng-controller="ClientSidePreview")
            .item-preview-wrapper
              .player-label
                img(ng-src='{{playerLabelImg}}')
              .player-container
                optimized-preview-player(
                  data-jade-template='dev-editor',
                  ng-model="xhtml",
                  player-components="components",
                  player-outcomes="outcome")
                summary-feedback(ng-model="item.summaryFeedback", session-complete="session.isComplete")
              preview-player-control-panel(
                data-mode='playerMode',
                data-settings='playerSettings',
                data-score="score")
